---
- name: Setting up master node
  hosts:
    - openmp-tutorial-1
  user: cc
  become: true
  roles: 
    - basic
    - master
  vars:
    cluster_name: galaxy.cluster
    master_node_hostname: openmp-tutorial-1
    munge_user_passwd: jlDmPv
    slurm_user_passwd: jlDmPv
    # Hosts for slurm.conf file
    hosts:
      - { name: "openmp-tutorial-1", mem: 187000, cpus: 48, ip: 10.140.83.180 }
      - { name: "openmp-tutorial-2", mem: 187000, cpus: 48, ip: 10.140.82.20 }
      - { name: "openmp-tutorial-3", mem: 187000, cpus: 48, ip: 10.140.82.70 }
      - { name: "openmp-tutorial-4", mem: 187000, cpus: 48, ip: 10.140.83.19 }
      - { name: "openmp-tutorial-5", mem: 187000, cpus: 48, ip: 10.140.83.52 }
      - { name: "openmp-tutorial-6", mem: 187000, cpus: 48, ip: 10.140.82.253 }
      - { name: "openmp-tutorial-7", mem: 187000, cpus: 48, ip: 10.140.83.151 }

    nfs_exports:
      # users accounts
      - /home *(rw,sync,no_root_squash,no_subtree_check)
      # munge authentication keys
      - /etc/munge *(rw,sync,no_root_squash,no_subtree_check)
      # for slurm.confg and gres.conf files 
      - /etc/slurm-llnl *(rw,sync,no_root_squash,no_subtree_check)
